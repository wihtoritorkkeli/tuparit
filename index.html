<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Space Invaders</title>
        <link href="styles.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <div class="mainFlexContainer">
            <div class="mainFlex1">
                <div class="centerDiv">
                    <ul>
                        <li class="naviItem"><a href="index.html">Game</a></li>
                        <li class="naviItem"><a href="leaderboard.html">Leaderboard</a></li>
                    </ul>
                </div>
            </div>
            <div class="mainFlex2">
                <div class="centerDiv">
                    <div class="playerSelection" id="playerSelection">
                        <h1>Player selection</h1>
                        <div id="playerList" class="playerListFlex"> 

                        </div>
                        <form class="startGame">
                            <input type="text" id="teamName" class="hide">
                            <button id="newGame" disabled>Start new game</button>
                        </form>
                    </div>
                    <div>
                        <canvas class="peli hide" id="peli"></canvas>
                        <div class="endScreen hide" id="endScreen">
                            <h1 class="h1-end">Game over</h1>
                            <div class="scoreview">
                                <p id="teamNameFill"></p>
                                <p id="scoreFill"></p>
                                <button id="returnHome" onclick="returnHome()">Return to players selection</button>
                            </div>
                        </div>
                        <script type="text/javascript" src="game.js"></script>
                        <script type="text/javascript">
                            function returnHome(){
                                document.getElementById("playerSelection").classList.remove("hide");
                                document.getElementById("endScreen").classList.add("hide");
                                selectedPlayer = "";
                                for(let i in here){
                                    if(document.getElementById(here[i]).classList.contains("selected")){
                                                document.getElementById(here[i]).classList.remove("selected");
                                            }
                                }
                                document.getElementById("newGame").setAttribute("disabled", "");
                                document.getElementById("teamName").value = "";
                            }

                            const here = [
                                "Aleksi",
                                "Enna",
                                "Sierra",
                                "Josh",
                                "Eerika",
                                "Aatu",
                                "Matias",
                                "Eve",
                                "Jenni",
                                "Joel",
                                "Petra",
                                "Senni",
                                "Taru",
                                "Brianna"
                            ];

                            let playerList = document.getElementById("playerList"), playerImage;

                            playerList.innerHTML= "";

                            let selectedPlayer;

                            for(let i in here){
                                playerImage = document.createElement("img");
                                playerImage.src = `assets/space_${here[i]}.png`;
                                playerImage.height = 140;
                                playerImage.width = 200;
                                playerImage.id = here[i];
                                playerImage.onclick = function (){
                                    document.getElementById("teamName").value = here[i];
                                    selectedPlayer = here[i];
                                    document.getElementById("newGame").removeAttribute("disabled");
                                    console.log(selectedPlayer);
                                    for(let j in here){
                                        console.log(here[j]);
                                        if(here[j] === selectedPlayer){
                                            document.getElementById(here[j]).classList.add("selected");
                                        }
                                        else{
                                            if(document.getElementById(here[j]).classList.contains("selected")){
                                                document.getElementById(here[j]).classList.remove("selected");
                                            }
                                        }
                                    }
                                };
                                playerList.append(playerImage);

                            }

                        </script>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>